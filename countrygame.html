<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Country Game</title>
    <link rel="icon" type="image/svg+xml" href="/countryfavicon.svg" />
    <style>
        html, body {
          margin: 0;
          padding: 0;
          height: 100%;
          display: flex;

          background-color: #646565; /* Optional: background behind the image */
          position: relative;
          
        }
        img {
          pointer-events: none; /* Prevents direct mouse interaction with images */
          position: absolute;
          top: 0;
          left: 0;
          height: 100vh;
          width: auto;
          
          loading: lazy;
        }



        canvas {
          display: none; /* Hidden canvas for pixel checking */
        }
    </style>
</head>
<body>

  <canvas id="checker-canvas"></canvas>

<div id="prompt" style="
  position: fixed;
  top: 20px;
  width: 100%;
  text-align: center;
  font-size: 2em;
  color: white;
  z-index: 9999;
  font-family: sans-serif;
  text-shadow: 1px 1px 2px black;
">
  Loading...
</div>

<div id="country-name" style="
  position: fixed;
  top: 70px;
  width: 100%;
  text-align: center;
  font-size: 1.5em;
  z-index: 9999;
  font-family: sans-serif;
  text-shadow: 1px 1px 2px black;
"></div>

<div id="score" style="
  position: fixed;
  top: 20px;
  right: 20px;
  font-size: 1.2em;
  color: white;
  z-index: 9999;
  font-family: sans-serif;
  text-shadow: 1px 1px 2px black;
"></div>

<img src="https://github.com/Cosmizy/worldmap/blob/main/worldmapocean.png?raw=true" loading="eager">

<img src="https://cosmizy.com/countryimages1/country_newzealand.png">
<img src="https://cosmizy.com/countryimages1/country_antarctica.png">
<img src="https://cosmizy.com/countryimages1/country_australia.png">
<img src="https://cosmizy.com/countryimages1/country_denmark.png">
<img src="https://cosmizy.com/countryimages1/country_canada.png">
<img src="https://cosmizy.com/countryimages1/country_unitedstates.png">
<img src="https://cosmizy.com/countryimages1/country_unitedkingdom.png">
<img src="https://cosmizy.com/countryimages1/country_france.png">
<img src="https://cosmizy.com/countryimages1/country_russia.png">
<img src="https://cosmizy.com/countryimages1/country_japan.png">
<img src="https://cosmizy.com/countryimages1/country_china.png">
<img src="https://cosmizy.com/countryimages1/country_northkorea.png">
<img src="https://cosmizy.com/countryimages1/country_southkorea.png">
<img src="https://cosmizy.com/countryimages1/country_taiwan.png">
<img src="https://cosmizy.com/countryimages1/country_philippines.png">
<img src="https://cosmizy.com/countryimages1/country_samoa.png">
<img src="https://cosmizy.com/countryimages1/country_fiji.png">
<img src="https://cosmizy.com/countryimages1/country_vanuatu.png">
<img src="https://cosmizy.com/countryimages1/country_solomonislands.png">
<img src="https://cosmizy.com/countryimages1/country_papuanewguinea.png">
<img src="https://cosmizy.com/countryimages1/country_timorleste.png">
<img src="https://cosmizy.com/countryimages1/country_indonesia.png">
<img src="https://cosmizy.com/countryimages1/country_brunei.png">
<img src="https://cosmizy.com/countryimages1/country_malaysia.png">
<img src="https://cosmizy.com/countryimages1/country_india.png">
<img src="https://cosmizy.com/countryimages1/country_thailand.png">
<img src="https://cosmizy.com/countryimages1/country_cambodia.png">
<img src="https://cosmizy.com/countryimages1/country_vietnam.png">
<img src="https://cosmizy.com/countryimages1/country_laos.png">
<img src="https://cosmizy.com/countryimages1/country_myanmar.png">
<img src="https://cosmizy.com/countryimages1/country_bangladesh.png">
<img src="https://cosmizy.com/countryimages1/country_bhutan.png">
<img src="https://cosmizy.com/countryimages1/country_nepal.png">
<img src="https://cosmizy.com/countryimages1/country_srilanka.png">
<img src="https://cosmizy.com/countryimages1/country_afghanistan.png">
<img src="https://cosmizy.com/countryimages1/country_mongolia.png">
<img src="https://cosmizy.com/countryimages1/country_kazakhstan.png">
<img src="https://cosmizy.com/countryimages1/country_pakistan.png">
<img src="https://cosmizy.com/countryimages1/country_kyrgyzstan.png">
<img src="https://cosmizy.com/countryimages1/country_tajikistan.png">
<img src="https://cosmizy.com/countryimages1/country_uzbekistan.png">
<img src="https://cosmizy.com/countryimages1/country_turkmenistan.png">
<img src="https://cosmizy.com/countryimages1/country_georgia.png">
<img src="https://cosmizy.com/countryimages1/country_armenia.png">
<img src="https://cosmizy.com/countryimages1/country_azerbaijan.png">
<img src="https://cosmizy.com/countryimages1/country_iran.png">
<img src="https://cosmizy.com/countryimages1/country_israel.png">
<img src="https://cosmizy.com/countryimages1/country_lebanon.png">
<img src="https://cosmizy.com/countryimages1/country_jordan.png">
<img src="https://cosmizy.com/countryimages1/country_syria.png">
<img src="https://cosmizy.com/countryimages1/country_iraq.png">
<img src="https://cosmizy.com/countryimages1/country_kuwait.png">
<img src="https://cosmizy.com/countryimages1/country_qatar.png">
<img src="https://cosmizy.com/countryimages1/country_unitedarabemirates.png">
<img src="https://cosmizy.com/countryimages1/country_oman.png">
<img src="https://cosmizy.com/countryimages1/country_yemen.png">
<img src="https://cosmizy.com/countryimages1/country_saudiarabia.png">
<img src="https://cosmizy.com/countryimages1/country_norway.png">
<img src="https://cosmizy.com/countryimages1/country_ireland.png">
<img src="https://cosmizy.com/countryimages1/country_iceland.png">
<img src="https://cosmizy.com/countryimages1/country_finland.png">
<img src="https://cosmizy.com/countryimages1/country_sweden.png">
<img src="https://cosmizy.com/countryimages1/country_estonia.png">
<img src="https://cosmizy.com/countryimages1/country_latvia.png">
<img src="https://cosmizy.com/countryimages1/country_lithuania.png">
<img src="https://cosmizy.com/countryimages1/country_belarus.png">
<img src="https://cosmizy.com/countryimages1/country_ukraine.png">
<img src="https://cosmizy.com/countryimages1/country_moldova.png">
<img src="https://cosmizy.com/countryimages1/country_romania.png">
<img src="https://cosmizy.com/countryimages1/country_hungary.png">
<img src="https://cosmizy.com/countryimages1/country_slovakia.png">
<img src="https://cosmizy.com/countryimages1/country_poland.png">
<img src="https://cosmizy.com/countryimages1/country_czechrepublic.png">
<img src="https://cosmizy.com/countryimages1/country_germany.png">
<img src="https://cosmizy.com/countryimages1/country_netherlands.png">
<img src="https://cosmizy.com/countryimages1/country_belgium.png">
<img src="https://cosmizy.com/countryimages1/country_luxembourg.png">
<img src="https://cosmizy.com/countryimages1/country_cyprus.png">
<img src="https://cosmizy.com/countryimages1/country_turkey.png">
<img src="https://cosmizy.com/countryimages1/country_greece.png">
<img src="https://cosmizy.com/countryimages1/country_northmacedonia.png">
<img src="https://cosmizy.com/countryimages1/country_albania.png">
<img src="https://cosmizy.com/countryimages1/country_bulgaria.png">
<img src="https://cosmizy.com/countryimages1/country_kosovo.png">
<img src="https://cosmizy.com/countryimages1/country_montenegro.png">
<img src="https://cosmizy.com/countryimages1/country_serbia.png">
<img src="https://cosmizy.com/countryimages1/country_bosniaandherzegovina.png">
<img src="https://cosmizy.com/countryimages1/country_croatia.png">
<img src="https://cosmizy.com/countryimages1/country_slovenia.png">
<img src="https://cosmizy.com/countryimages1/country_austria.png">
<img src="https://cosmizy.com/countryimages1/country_switzerland.png">
<img src="https://cosmizy.com/countryimages1/country_italy.png">
<img src="https://cosmizy.com/countryimages1/country_spain.png">
<img src="https://cosmizy.com/countryimages1/country_portugal.png">
<img src="https://cosmizy.com/countryimages1/country_madagascar.png">
<img src="https://cosmizy.com/countryimages1/country_uruguay.png">
<img src="https://cosmizy.com/countryimages1/country_chile.png">
<img src="https://cosmizy.com/countryimages1/country_argentina.png">
<img src="https://cosmizy.com/countryimages1/country_paraguay.png">
<img src="https://cosmizy.com/countryimages1/country_suriname.png">
<img src="https://cosmizy.com/countryimages1/country_guyana.png">
<img src="https://cosmizy.com/countryimages1/country_brazil.png">
<img src="https://cosmizy.com/countryimages1/country_bolivia.png">
<img src="https://cosmizy.com/countryimages1/country_peru.png">
<img src="https://cosmizy.com/countryimages1/country_ecuador.png">
<img src="https://cosmizy.com/countryimages1/country_colombia.png">
<img src="https://cosmizy.com/countryimages1/country_venezuela.png">
<img src="https://cosmizy.com/countryimages1/country_trinidadandtobago.png">
<img src="https://cosmizy.com/countryimages1/country_puertorico.png">
<img src="https://cosmizy.com/countryimages1/country_dominicanrepublic.png">
<img src="https://cosmizy.com/countryimages1/country_haiti.png">
<img src="https://cosmizy.com/countryimages1/country_jamaica.png">
<img src="https://cosmizy.com/countryimages1/country_thebahamas.png">
<img src="https://cosmizy.com/countryimages1/country_cuba.png">
<img src="https://cosmizy.com/countryimages1/country_panama.png">
<img src="https://cosmizy.com/countryimages1/country_costarica.png">
<img src="https://cosmizy.com/countryimages1/country_nicaragua.png">
<img src="https://cosmizy.com/countryimages1/country_honduras.png">
<img src="https://cosmizy.com/countryimages1/country_elsalvador.png">
<img src="https://cosmizy.com/countryimages1/country_belize.png">
<img src="https://cosmizy.com/countryimages1/country_guatemala.png">
<img src="https://cosmizy.com/countryimages1/country_mexico.png">
<img src="https://cosmizy.com/countryimages1/country_mauritius.png">
<img src="https://cosmizy.com/countryimages1/country_angola.png">
<img src="https://cosmizy.com/countryimages1/country_eswatini.png">
<img src="https://cosmizy.com/countryimages1/country_lesotho.png">
<img src="https://cosmizy.com/countryimages1/country_botswana.png">
<img src="https://cosmizy.com/countryimages1/country_zimbabwe.png">
<img src="https://cosmizy.com/countryimages1/country_mozambique.png">
<img src="https://cosmizy.com/countryimages1/country_malawi.png">
<img src="https://cosmizy.com/countryimages1/country_zambia.png">
<img src="https://cosmizy.com/countryimages1/country_tanzania.png">
<img src="https://cosmizy.com/countryimages1/country_burundi.png">
<img src="https://cosmizy.com/countryimages1/country_rwanda.png">
<img src="https://cosmizy.com/countryimages1/country_equatorialguinea.png">
<img src="https://cosmizy.com/countryimages1/country_gabon.png">
<img src="https://cosmizy.com/countryimages1/country_republicofthecongo.png">
<img src="https://cosmizy.com/countryimages1/country_democraticrepublicofthecongo.png">
<img src="https://cosmizy.com/countryimages1/country_tunisia.png">
<img src="https://cosmizy.com/countryimages1/country_morocco.png">
<img src="https://cosmizy.com/countryimages1/country_westernsahara.png">
<img src="https://cosmizy.com/countryimages1/country_southafrica.png">
<img src="https://cosmizy.com/countryimages1/country_namibia.png">
<img src="https://cosmizy.com/countryimages1/country_kenya.png">
<img src="https://cosmizy.com/countryimages1/country_uganda.png">
<img src="https://cosmizy.com/countryimages1/country_centralafricanrepublic.png">
<img src="https://cosmizy.com/countryimages1/country_chad.png">
<img src="https://cosmizy.com/countryimages1/country_somalia.png">
<img src="https://cosmizy.com/countryimages1/country_djibouti.png">
<img src="https://cosmizy.com/countryimages1/country_ethiopia.png">
<img src="https://cosmizy.com/countryimages1/country_southsudan.png">
<img src="https://cosmizy.com/countryimages1/country_eritrea.png">
<img src="https://cosmizy.com/countryimages1/country_sudan.png">
<img src="https://cosmizy.com/countryimages1/country_cameroon.png">
<img src="https://cosmizy.com/countryimages1/country_nigeria.png">
<img src="https://cosmizy.com/countryimages1/country_niger.png">
<img src="https://cosmizy.com/countryimages1/country_thegambia.png">
<img src="https://cosmizy.com/countryimages1/country_senegal.png">
<img src="https://cosmizy.com/countryimages1/country_guineabissau.png">
<img src="https://cosmizy.com/countryimages1/country_guinea.png">
<img src="https://cosmizy.com/countryimages1/country_sierraleone.png">
<img src="https://cosmizy.com/countryimages1/country_ivorycoast.png">
<img src="https://cosmizy.com/countryimages1/country_ghana.png">
<img src="https://cosmizy.com/countryimages1/country_togo.png">
<img src="https://cosmizy.com/countryimages1/country_benin.png">
<img src="https://cosmizy.com/countryimages1/country_burkinafaso.png">
<img src="https://cosmizy.com/countryimages1/country_mali.png">
<img src="https://cosmizy.com/countryimages1/country_mauritania.png">
<img src="https://cosmizy.com/countryimages1/country_egypt.png">
<img src="https://cosmizy.com/countryimages1/country_libya.png">
<img src="https://cosmizy.com/countryimages1/country_algeria.png">
<img src="https://cosmizy.com/countryimages1/country_liberia.png">

<script>
//window.addEventListener('load', () => {
  const countryImages = Array.from(document.querySelectorAll('img')).filter(img =>
    img.src.includes('country_')
  );

  const display = document.getElementById('country-name');
  const prompt = document.getElementById('prompt');
  const scoreDisplay = document.getElementById('score');
  const canvas = document.getElementById('checker-canvas');
  const ctx = canvas.getContext('2d');

  countryImages.forEach(img => {
    img.crossOrigin = "anonymous";
    const match = img.src.match(/country_([a-z0-9_-]+)\.png/i);
    if (match && match[1]) {
      img.id = match[1].toLowerCase();
    }
  });

  function formatName(id) {
    return id.replace(/[_-]/g, ' ').replace(/\b\w/g, c => c.toUpperCase());
  }

// Set a cookie that lasts 365 days
function setCookie(name, value, days) {
  const date = new Date();
  date.setTime(date.getTime() + (days*24*60*60*1000));
  const expires = "expires=" + date.toUTCString();
  document.cookie = `${name}=${value}; ${expires}; path=/`;
}

// Get a cookie value
function getCookie(name) {
  const cookies = document.cookie.split("; ");
  for (const c of cookies) {
    const [key, val] = c.split("=");
    if (key === name) return val;
  }
  return null;
}


  let targetCountry = null;
  let score = 0;
  let highScore = parseInt(getCookie('highscore') || '0');

  function updateScoreDisplay() {
    scoreDisplay.textContent = `Score: ${score} | High Score: ${highScore}`;
  }

  function pickRandomCountry() {
    const randomImg = countryImages[Math.floor(Math.random() * countryImages.length)];
    targetCountry = randomImg.id;
    prompt.textContent = `Where is ${formatName(targetCountry)}?`;
    display.textContent = '';
    display.style.color = 'white';
  }

  pickRandomCountry();
  updateScoreDisplay();

  document.addEventListener('click', (e) => {
    for (let i = countryImages.length - 1; i >= 0; i--) {
      const img = countryImages[i];
      const rect = img.getBoundingClientRect();

      if (
        e.clientX >= rect.left &&
        e.clientX <= rect.right &&
        e.clientY >= rect.top &&
        e.clientY <= rect.bottom
      ) {
        const x = e.clientX - rect.left;
        const y = e.clientY - rect.top;

        canvas.width = img.naturalWidth;
        canvas.height = img.naturalHeight;
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ctx.drawImage(img, 0, 0);

        const scaleX = img.naturalWidth / img.width;
        const scaleY = img.naturalHeight / img.height;
        const realX = Math.floor(x * scaleX);
        const realY = Math.floor(y * scaleY);

        const pixel = ctx.getImageData(realX, realY, 1, 1).data;
        const alpha = pixel[3];

        if (alpha > 0) {
          const clickedId = img.id;
          const formatted = formatName(clickedId);

          if (clickedId === targetCountry) {
            score++;
            if (score > highScore) {
              highScore = score;
              setCookie("highscore", score, 365);
            }
            display.textContent = `Correct! That is ${formatted}.`;
            display.style.color = 'lightgreen';
          } else {
            display.textContent = `That was ${formatted}.`;
            display.style.color = 'red';
            score = 0;
          }

          updateScoreDisplay();
          setTimeout(pickRandomCountry, 1500);
          return;
        }
      }
    }
  });
//});
</script>



</body>
</html>
