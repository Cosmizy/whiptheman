<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Country Game</title>
    <link rel="icon" type="image/svg+xml" href="/countryfavicon.svg" />
    <style>
        html, body {
          margin: 0;
          padding: 0;
          height: 100%;
          display: flex;

          background-color: #646565; /* Optional: background behind the image */
          position: relative;
          
        }
        img {
          pointer-events: none; /* Prevents direct mouse interaction with images */
          position: absolute;
          top: 0;
          left: 0;
          height: 100vh;
          width: auto;
          
          loading: lazy;
        }



        canvas {
          display: none; /* Hidden canvas for pixel checking */
        }
    </style>
</head>
<body>

  <canvas id="checker-canvas"></canvas>

<div id="prompt" style="
  position: fixed;
  top: 20px;
  width: 100%;
  text-align: center;
  font-size: 2em;
  color: white;
  z-index: 9999;
  font-family: sans-serif;
  text-shadow: 1px 1px 2px black;
">
  Loading...
</div>

<div id="country-name" style="
  position: fixed;
  top: 70px;
  width: 100%;
  text-align: center;
  font-size: 1.5em;
  z-index: 9999;
  font-family: sans-serif;
  text-shadow: 1px 1px 2px black;
"></div>

<div id="score" style="
  position: fixed;
  top: 20px;
  right: 20px;
  font-size: 1.2em;
  color: white;
  z-index: 9999;
  font-family: sans-serif;
  text-shadow: 1px 1px 2px black;
"></div>

<img src="https://github.com/Cosmizy/worldmap/blob/main/worldmapocean.png?raw=true" loading="eager">

<img src="https://cosmizy.com/countryimages1/country-newzealand.png">
<img src="https://cosmizy.com/countryimages1/country-antarctica.png">
<img src="https://cosmizy.com/countryimages1/country-australia.png">
<img src="https://cosmizy.com/countryimages1/country-denmark.png">
<img src="https://cosmizy.com/countryimages1/country-canada.png">
<img src="https://cosmizy.com/countryimages1/country-unitedstates.png">
<img src="https://cosmizy.com/countryimages1/country-unitedkingdom.png">
<img src="https://cosmizy.com/countryimages1/country-france.png">
<img src="https://cosmizy.com/countryimages1/country-russia.png">
<img src="https://cosmizy.com/countryimages1/country-japan.png">
<img src="https://cosmizy.com/countryimages1/country-china.png">
<img src="https://cosmizy.com/countryimages1/country-northkorea.png">
<img src="https://cosmizy.com/countryimages1/country-southkorea.png">
<img src="https://cosmizy.com/countryimages1/country-taiwan.png">
<img src="https://cosmizy.com/countryimages1/country-philippines.png">
<img src="https://cosmizy.com/countryimages1/country-samoa.png">
<img src="https://cosmizy.com/countryimages1/country-fiji.png">
<img src="https://cosmizy.com/countryimages1/country-vanuatu.png">
<img src="https://cosmizy.com/countryimages1/country-solomonislands.png">
<img src="https://cosmizy.com/countryimages1/country-papuanewguinea.png">
<img src="https://cosmizy.com/countryimages1/country-timorleste.png">
<img src="https://cosmizy.com/countryimages1/country-indonesia.png">
<img src="https://cosmizy.com/countryimages1/country-brunei.png">
<img src="https://cosmizy.com/countryimages1/country-malaysia.png">
<img src="https://cosmizy.com/countryimages1/country-india.png">
<img src="https://cosmizy.com/countryimages1/country-thailand.png">
<img src="https://cosmizy.com/countryimages1/country-cambodia.png">
<img src="https://cosmizy.com/countryimages1/country-vietnam.png">
<img src="https://cosmizy.com/countryimages1/country-laos.png">
<img src="https://cosmizy.com/countryimages1/country-myanmar.png">
<img src="https://cosmizy.com/countryimages1/country-bangladesh.png">
<img src="https://cosmizy.com/countryimages1/country-bhutan.png">
<img src="https://cosmizy.com/countryimages1/country-nepal.png">
<img src="https://cosmizy.com/countryimages1/country-srilanka.png">
<img src="https://cosmizy.com/countryimages1/country-afghanistan.png">
<img src="https://cosmizy.com/countryimages1/country-mongolia.png">
<img src="https://cosmizy.com/countryimages1/country-kazakhstan.png">
<img src="https://cosmizy.com/countryimages1/country-pakistan.png">
<img src="https://cosmizy.com/countryimages1/country-kyrgyzstan.png">
<img src="https://cosmizy.com/countryimages1/country-tajikistan.png">
<img src="https://cosmizy.com/countryimages1/country-uzbekistan.png">
<img src="https://cosmizy.com/countryimages1/country-turkmenistan.png">
<img src="https://cosmizy.com/countryimages1/country-georgia.png">
<img src="https://cosmizy.com/countryimages1/country-armenia.png">
<img src="https://cosmizy.com/countryimages1/country-azerbaijan.png">
<img src="https://cosmizy.com/countryimages1/country-iran.png">
<img src="https://cosmizy.com/countryimages1/country-israel.png">
<img src="https://cosmizy.com/countryimages1/country-lebanon.png">
<img src="https://cosmizy.com/countryimages1/country-jordan.png">
<img src="https://cosmizy.com/countryimages1/country-syria.png">
<img src="https://cosmizy.com/countryimages1/country-iraq.png">
<img src="https://cosmizy.com/countryimages1/country-kuwait.png">
<img src="https://cosmizy.com/countryimages1/country-qatar.png">
<img src="https://cosmizy.com/countryimages1/country-unitedarabemirates.png">
<img src="https://cosmizy.com/countryimages1/country-oman.png">
<img src="https://cosmizy.com/countryimages1/country-yemen.png">
<img src="https://cosmizy.com/countryimages1/country-saudiarabia.png">
<img src="https://cosmizy.com/countryimages1/country-norway.png">
<img src="https://cosmizy.com/countryimages1/country-ireland.png">
<img src="https://cosmizy.com/countryimages1/country-iceland.png">
<img src="https://cosmizy.com/countryimages1/country-finland.png">
<img src="https://cosmizy.com/countryimages1/country-sweden.png">
<img src="https://cosmizy.com/countryimages1/country-estonia.png">
<img src="https://cosmizy.com/countryimages1/country-latvia.png">
<img src="https://cosmizy.com/countryimages1/country-lithuania.png">
<img src="https://cosmizy.com/countryimages1/country-belarus.png">
<img src="https://cosmizy.com/countryimages1/country-ukraine.png">
<img src="https://cosmizy.com/countryimages1/country-moldova.png">
<img src="https://cosmizy.com/countryimages1/country-romania.png">
<img src="https://cosmizy.com/countryimages1/country-hungary.png">
<img src="https://cosmizy.com/countryimages1/country-slovakia.png">
<img src="https://cosmizy.com/countryimages1/country-poland.png">
<img src="https://cosmizy.com/countryimages1/country-czechrepublic.png">
<img src="https://cosmizy.com/countryimages1/country-germany.png">
<img src="https://cosmizy.com/countryimages1/country-netherlands.png">
<img src="https://cosmizy.com/countryimages1/country-belgium.png">
<img src="https://cosmizy.com/countryimages1/country-luxembourg.png">
<img src="https://cosmizy.com/countryimages1/country-cyprus.png">
<img src="https://cosmizy.com/countryimages1/country-turkey.png">
<img src="https://cosmizy.com/countryimages1/country-greece.png">
<img src="https://cosmizy.com/countryimages1/country-northmacedonia.png">
<img src="https://cosmizy.com/countryimages1/country-albania.png">
<img src="https://cosmizy.com/countryimages1/country-bulgaria.png">
<img src="https://cosmizy.com/countryimages1/country-kosovo.png">
<img src="https://cosmizy.com/countryimages1/country-montenegro.png">
<img src="https://cosmizy.com/countryimages1/country-serbia.png">
<img src="https://cosmizy.com/countryimages1/country-bosniaandherzegovina.png">
<img src="https://cosmizy.com/countryimages1/country-croatia.png">
<img src="https://cosmizy.com/countryimages1/country-slovenia.png">
<img src="https://cosmizy.com/countryimages1/country-austria.png">
<img src="https://cosmizy.com/countryimages1/country-switzerland.png">
<img src="https://cosmizy.com/countryimages1/country-italy.png">
<img src="https://cosmizy.com/countryimages1/country-spain.png">
<img src="https://cosmizy.com/countryimages1/country-portugal.png">
<img src="https://cosmizy.com/countryimages1/country-madagascar.png">
<img src="https://cosmizy.com/countryimages1/country-uruguay.png">
<img src="https://cosmizy.com/countryimages1/country-chile.png">
<img src="https://cosmizy.com/countryimages1/country-argentina.png">
<img src="https://cosmizy.com/countryimages1/country-paraguay.png">
<img src="https://cosmizy.com/countryimages1/country-suriname.png">
<img src="https://cosmizy.com/countryimages1/country-guyana.png">
<img src="https://cosmizy.com/countryimages1/country-brazil.png">
<img src="https://cosmizy.com/countryimages1/country-bolivia.png">
<img src="https://cosmizy.com/countryimages1/country-peru.png">
<img src="https://cosmizy.com/countryimages1/country-ecuador.png">
<img src="https://cosmizy.com/countryimages1/country-colombia.png">
<img src="https://cosmizy.com/countryimages1/country-venezuela.png">
<img src="https://cosmizy.com/countryimages1/country-trinidadandtobago.png">
<img src="https://cosmizy.com/countryimages1/country-puertorico.png">
<img src="https://cosmizy.com/countryimages1/country-dominicanrepublic.png">
<img src="https://cosmizy.com/countryimages1/country-haiti.png">
<img src="https://cosmizy.com/countryimages1/country-jamaica.png">
<img src="https://cosmizy.com/countryimages1/country-thebahamas.png">
<img src="https://cosmizy.com/countryimages1/country-cuba.png">
<img src="https://cosmizy.com/countryimages1/country-panama.png">
<img src="https://cosmizy.com/countryimages1/country-costarica.png">
<img src="https://cosmizy.com/countryimages1/country-nicaragua.png">
<img src="https://cosmizy.com/countryimages1/country-honduras.png">
<img src="https://cosmizy.com/countryimages1/country-elsalvador.png">
<img src="https://cosmizy.com/countryimages1/country-belize.png">
<img src="https://cosmizy.com/countryimages1/country-guatemala.png">
<img src="https://cosmizy.com/countryimages1/country-mexico.png">
<img src="https://cosmizy.com/countryimages1/country-mauritius.png">
<img src="https://cosmizy.com/countryimages1/country-angola.png">
<img src="https://cosmizy.com/countryimages1/country-eswatini.png">
<img src="https://cosmizy.com/countryimages1/country-lesotho.png">
<img src="https://cosmizy.com/countryimages1/country-botswana.png">
<img src="https://cosmizy.com/countryimages1/country-zimbabwe.png">
<img src="https://cosmizy.com/countryimages1/country-mozambique.png">
<img src="https://cosmizy.com/countryimages1/country-malawi.png">
<img src="https://cosmizy.com/countryimages1/country-zambia.png">
<img src="https://cosmizy.com/countryimages1/country-tanzania.png">
<img src="https://cosmizy.com/countryimages1/country-burundi.png">
<img src="https://cosmizy.com/countryimages1/country-rwanda.png">
<img src="https://cosmizy.com/countryimages1/country-equatorialguinea.png">
<img src="https://cosmizy.com/countryimages1/country-gabon.png">
<img src="https://cosmizy.com/countryimages1/country-republicofthecongo.png">
<img src="https://cosmizy.com/countryimages1/country-democraticrepublicofthecongo.png">
<img src="https://cosmizy.com/countryimages1/country-tunisia.png">
<img src="https://cosmizy.com/countryimages1/country-morocco.png">
<img src="https://cosmizy.com/countryimages1/country-westernsahara.png">
<img src="https://cosmizy.com/countryimages1/country-southafrica.png">
<img src="https://cosmizy.com/countryimages1/country-namibia.png">
<img src="https://cosmizy.com/countryimages1/country-kenya.png">
<img src="https://cosmizy.com/countryimages1/country-uganda.png">
<img src="https://cosmizy.com/countryimages1/country-centralafricanrepublic.png">
<img src="https://cosmizy.com/countryimages1/country-chad.png">
<img src="https://cosmizy.com/countryimages1/country-somalia.png">
<img src="https://cosmizy.com/countryimages1/country-djibouti.png">
<img src="https://cosmizy.com/countryimages1/country-ethiopia.png">
<img src="https://cosmizy.com/countryimages1/country-southsudan.png">
<img src="https://cosmizy.com/countryimages1/country-eritrea.png">
<img src="https://cosmizy.com/countryimages1/country-sudan.png">
<img src="https://cosmizy.com/countryimages1/country-cameroon.png">
<img src="https://cosmizy.com/countryimages1/country-nigeria.png">
<img src="https://cosmizy.com/countryimages1/country-niger.png">
<img src="https://cosmizy.com/countryimages1/country-thegambia.png">
<img src="https://cosmizy.com/countryimages1/country-senegal.png">
<img src="https://cosmizy.com/countryimages1/country-guineabissau.png">
<img src="https://cosmizy.com/countryimages1/country-guinea.png">
<img src="https://cosmizy.com/countryimages1/country-sierraleone.png">
<img src="https://cosmizy.com/countryimages1/country-ivorycoast.png">
<img src="https://cosmizy.com/countryimages1/country-ghana.png">
<img src="https://cosmizy.com/countryimages1/country-togo.png">
<img src="https://cosmizy.com/countryimages1/country-benin.png">
<img src="https://cosmizy.com/countryimages1/country-burkinafaso.png">
<img src="https://cosmizy.com/countryimages1/country-mali.png">
<img src="https://cosmizy.com/countryimages1/country-mauritania.png">
<img src="https://cosmizy.com/countryimages1/country-egypt.png">
<img src="https://cosmizy.com/countryimages1/country-libya.png">
<img src="https://cosmizy.com/countryimages1/country-algeria.png">
<img src="https://cosmizy.com/countryimages1/country-liberia.png">

<script>
window.addEventListener('load', () => {
  const countryImages = Array.from(document.querySelectorAll('img')).filter(img =>
    img.src.includes('country-')
  );

  const display = document.getElementById('country-name');
  const prompt = document.getElementById('prompt');
  const scoreDisplay = document.getElementById('score');
  const canvas = document.getElementById('checker-canvas');
  const ctx = canvas.getContext('2d');

  countryImages.forEach(img => {
    img.crossOrigin = "anonymous";
    const match = img.src.match(/country-([a-z0-9_-]+)\.png/i);
    if (match && match[1]) {
      img.id = match[1].toLowerCase();
    }
  });

  function formatName(id) {
    return id.replace(/[_-]/g, ' ').replace(/\b\w/g, c => c.toUpperCase());
  }

// Set a cookie that lasts 365 days
function setCookie(name, value, days) {
  const date = new Date();
  date.setTime(date.getTime() + (days*24*60*60*1000));
  const expires = "expires=" + date.toUTCString();
  document.cookie = `${name}=${value}; ${expires}; path=/`;
}

// Get a cookie value
function getCookie(name) {
  const cookies = document.cookie.split("; ");
  for (const c of cookies) {
    const [key, val] = c.split("=");
    if (key === name) return val;
  }
  return null;
}


  let targetCountry = null;
  let score = 0;
  let highScore = parseInt(getCookie('highscore') || '0');

  function updateScoreDisplay() {
    scoreDisplay.textContent = `Score: ${score} | High Score: ${highScore}`;
  }

  function pickRandomCountry() {
    const randomImg = countryImages[Math.floor(Math.random() * countryImages.length)];
    targetCountry = randomImg.id;
    prompt.textContent = `Where is ${formatName(targetCountry)}?`;
    display.textContent = '';
    display.style.color = 'white';
  }

  pickRandomCountry();
  updateScoreDisplay();

  document.addEventListener('click', (e) => {
    for (let i = countryImages.length - 1; i >= 0; i--) {
      const img = countryImages[i];
      const rect = img.getBoundingClientRect();

      if (
        e.clientX >= rect.left &&
        e.clientX <= rect.right &&
        e.clientY >= rect.top &&
        e.clientY <= rect.bottom
      ) {
        const x = e.clientX - rect.left;
        const y = e.clientY - rect.top;

        canvas.width = img.naturalWidth;
        canvas.height = img.naturalHeight;
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ctx.drawImage(img, 0, 0);

        const scaleX = img.naturalWidth / img.width;
        const scaleY = img.naturalHeight / img.height;
        const realX = Math.floor(x * scaleX);
        const realY = Math.floor(y * scaleY);

        const pixel = ctx.getImageData(realX, realY, 1, 1).data;
        const alpha = pixel[3];

        if (alpha > 0) {
          const clickedId = img.id;
          const formatted = formatName(clickedId);

          if (clickedId === targetCountry) {
            score++;
            if (score > highScore) {
              highScore = score;
              setCookie("highscore", score, 365);
            }
            display.textContent = `Correct! That is ${formatted}.`;
            display.style.color = 'lightgreen';
          } else {
            display.textContent = `That was ${formatted}.`;
            display.style.color = 'red';
            score = 0;
          }

          updateScoreDisplay();
          setTimeout(pickRandomCountry, 1500);
          return;
        }
      }
    }
  });
});
</script>



</body>
</html>
